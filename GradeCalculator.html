<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LMS - Grade Calculator</title>
    <link href="css/bootstrap.css" rel="stylesheet">
    <link rel="shortcut icon" href="/images/cwm.jpg" type="image/x-icon">
    <script src="/scripts/jquery.js"></script>
    <script src="/scripts/global.js"></script>
</head>

<body>

    <header class="container">
        <nav class="navbar navbar-expand-lg bg-primary" data-bs-theme="dark">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">LMS</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="#">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="admin/index.html">Admin</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="dashboard.html">Dashboard</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="contact.html">Contact</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="about.html">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="GradeCalculator.html">Grade
                                Calculator</a>
                        </li>
                    </ul>
                    <ul class="navbar-nav mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="account/login.html" id="login">Login</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="account/logout.html" id="logout">Logout</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <main class="container">
        <div class="row">
            <div class="col-lg-6">
                <fieldset>
                    <legend>Enter Marks</legend>
                    <div class="row">
                        <div class="col-12 mt-2">
                            <label class="fw-bold" for="course">
                                Course</label>
                            <select name="course" id="course" class="form-select">
                                <option value="">Select a course</option>
                                <option value="1">C#</option>
                                <option value="2">HTML</option>
                                <option value="3">CSS</option>
                                <option value="4">JS</option>
                            </select>
                        </div>
                        <div class="col-12 mt-2">
                            <label class="fw-bold form-label" for="">
                                Attendance
                            </label><br>
                            <input type="radio" name="attendance" id="absent" value="0">
                            <label class="form-label" for="absent">
                                Absent
                            </label>
                            <input type="radio" name="attendance" id="present" value="1">
                            <label class="form-label" for="present">
                                Present
                            </label>

                        </div>
                        <div class="col-12 mt-2">
                            <label class="fw-bold" for="totalMarks"> <span class="text-danger">*</span>
                                Total
                                Marks</label>
                            <input type="number" id="totalMarks" name="totalMarks" class="form-control">
                        </div>
                        <div class="col-12 mt-2">
                            <label class="fw-bold" for="obtainedMarks"><span class="text-danger">*</span>
                                Obtained
                                Marks</label>
                            <input type="number" id="obtainedMarks" name="obtainedMarks" class="form-control">
                        </div>
                        <div class="col-12 mt-2">
                            <button class="btn btn-sm btn-primary" id="btnCalculateGrades">Calculate Grades</button>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class="col-lg-6">
                <fieldset>
                    <legend>Grades</legend>
                    <div class="row mt-2">
                        <label id="resultMessage"></label>
                    </div>
                    <div class="row mt-2">
                        <label id="percentage"></label>
                    </div>
                    <div class="row mt-2">
                        <label id="grade"></label>
                    </div>
                </fieldset>
            </div>
        </div>
    </main>
    <footer></footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <script>
        let btn = document.getElementById("btnCalculateGrades");

        btn.addEventListener("click", function ()
        {
            // alert("btn clicked!");

            var resultMessage = document.getElementById("resultMessage");
            var percentageMessage = document.getElementById("percentage");
            var gradeMessage = document.getElementById("grade");

            function EmptyResultFields()
            {
                resultMessage.textContent = "";
                percentageMessage.textContent = "";
                gradeMessage.textContent = "";
            }
            EmptyResultFields();
            var subject = document.getElementById("course").value;
            var attendance = document.querySelector('input[name="attendance"]:checked').value;
            console.log(attendance);
            // var attendanceOptions = document.querySelectorAll('input[name="attendance"]');
            // for (const attendance of attendanceOptions)
            // {
            //     if (attendance.checked)
            //     {

            //         console.log("attendance", attendance.value);

            //     }
            // }
            var totalMarks = parseInt(document.getElementById("totalMarks").value);
            var obtainedMarks = parseInt(document.getElementById("obtainedMarks").value);

            if (totalMarks == "" || obtainedMarks == "" || totalMarks == null || obtainedMarks == null)
            {
                result = "";
                percentage = "";
                grade = "";
                EmptyResultFields();
                alert("Please fill required fields");
                return false;
            }

            if (totalMarks < obtainedMarks)
            {
                EmptyResultFields();
                alert("Total marks cannot be smaller than obtained marks!");
                return false;
            }


            var percentage = (obtainedMarks / totalMarks) * 100;
            // console.warn(totalMarks);
            // console.error(obtainedMarks);
            // console.info(calculationMethod);

            var result = "";
            var grade = ""

            var resultMessage = document.getElementById("resultMessage");
            var percentageMessage = document.getElementById("percentage");
            var gradeMessage = document.getElementById("grade");



            if (percentage >= 0 && percentage < 33)
            {
                result = "Fail";
                grade = "F";
            } else if (percentage >= 33 && percentage < 49)
            {
                result = "Pass";
                grade = "D";
            } else if (percentage >= 50 && percentage < 59)
            {
                result = "Pass";
                grade = "C";
            } else if (percentage >= 60 && percentage < 69)
            {
                result = "Pass";
                grade = "B";
            } else if (percentage >= 70 && percentage < 79)
            {
                result = "Pass";
                grade = "B+";
            }
            else if (percentage >= 80 && percentage < 89)
            {
                result = "Pass";
                grade = "A";
            } else
            {
                result = "Distinction";
                grade = "A+";
            }
            resultMessage.textContent = result;
            percentageMessage.textContent = percentage;
            gradeMessage.textContent = grade;
        })
    </script>
</body>

</html>